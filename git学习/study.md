# GIT 学习

### 为什么学习GIT
例如在开发过程中，会经常调试和修改调试好的功能，然后复制以下进行调试，使得最后的项目文件中都是用来调试的文件。
还有就是你在写代码的时候可能会各种修改，优化你的代码，但是修改后，你的代码出现了问题，想回到最初的版本时候，是不是麻烦，想象就头疼。
每当项目经理，今天让加上A功能，明天加上B功能，后天删除A功能，你是不是想拿板砖拍死他。。。。
>如何简化这个过程，就需要版本控制软件
>>那么git就可以解决这样的问题，除了这些还有一下理由一定要学Git。

### GIT 概念
版本控制软件是用来控制记录文件变化，以便于未来查阅特定的修改情况的系统，因此有时候也会叫“版本控制系统”。
>好处
>>操作简便  只需要几组简单的终端命令，就可以快速上手常见的版本控制软件
>>易于对比  基于版本控制软件提供的功能，能够方便的比较文件的变化细节，从而查出导致问题的原因
>>易于回溯  可以将选定的文件回溯到之前的状态，甚至将整个项目都回溯到过去的某个时间点的状态
>>不易丢失  在版本控制软件中，被用户误删除的文件，可以轻松的恢复回来
>>写作方便  基于版本控制软件提供的分支功能，可以轻松实现多人协作开发时的代码合并操作

### 分类
本地版本控制系统
>优点：单机运行，使维护文件版本的操作工具化
>缺点：单机运行，不依赖团队开发；版本数据库出现故障后，所有历史更新记录都会丢失
>特点：使用软件来记录文件的不同版本，提高了工作效率，降低了手动维护版本的出错率


集中化的版本控制系统
>优点：联网运行，至此多人协作开发
>缺点：性能差、用户体验不好； 不支持离线提交版本更新；版本数据库出现故障后，所有历史更新记录都会丢失
>特点：基于服务器、客户端的运行模式
    * 服务器保存文件的所有更新记录
    * 客户端只保留最新的文件版本
例如： SVN

分布式版本控制系统
>优点：联网运行，至此多人开发；性能优秀、用户体验好；客户端断网后支持离线本地提交版本更新；服务器发生损坏，可以使用任何一个客户端的备份恢复
>缺点：很浪费存储空间
> 特点：基于服务器，客户端的运行模式
    * 服务器保存文件的所有更新版本
    * 客户端是服务器的完整备份，并不是只保留文件的最新版本
例如： Git

### Git 的特点
Git之所以快速和高效，主要依赖于它的如下两个特点：
>> 直接记录快照，而非差异比较
>> 近乎所有操作都是本地执行

#### SVN的差异比较
传统的版本控制系统（例如SVN）是基于差异的版本控制，它们存储的是一组基本文件和每个文件随着事件逐步累积的差异。
白话：记录文件变化的内容，而不是变化过后的文件进行记录
好处：节省空间
缺点：耗时、效率低
    在切换版本的时候，需要在基本文件上，应用每一次差异，从而生成对应版本的文件

#### Git的记录快照
Git快照是基于原有文件版本的基础上重新生成一份文件，类似于备份。
为了效率，如果没有修改，Git不将存储该文件，而只是保留一个连接指向前存储的文件
好处：版本切换非常快，因为每一个版本都是完整的文件快照，切换版本时直接回复目标的快照即可
坏处：占用磁盘空间非常大

几乎所有的操作都是本地执行，一般不需要网络上其他资源
    断网后任然可以对本地项目经行管理
    联网后可以和服务器进行同步

### Git的三个区域
    工作区、暂存区 和 Git仓库

    已修改（modified）： 已修改但是还没将修改的结果放到暂存区
    已暂存（staged）：表示对已修改的版本经行了标记，使包含在下次提交列表中  
    已提交（committed）：表示文件存储在本地的Git仓库

### 基本的Git工作流程
01 在工作区中修改文件
02 将你想要下次提交的修改经行保存
03 提交更细，找到暂存区的文件，将快照永久性存储到Git仓库

// ----------------------------------------------------------
# Git基础
### 全局配置项
配置全局配置项
    git config --global name 'zhanglei'
查看全局配置项
    git config --list --global // 查看全部
    git config --list --global name // 查看指定

帮助手册
    git help config 
    git config -h

### 获取Git仓库的两种方式
01 将尚未进行版本控制的本地目录转换为Git仓库
02 从其他服务器上克隆一个已经存在的Git仓库

#### 在现有目录中初始化仓库
01 在项目目录中，通过鼠标右键打开“Gti Bash”
02 执行git init命令将当前的目录转化为git仓库

git init命令会创建一个名为.git的隐藏目录，这个.git目录就是当前项目的Git仓库；
里面包含了初始的必要文件，这些文件是Git仓库的必要组成部分

### 工作区中文件的四种状态
* 未被Git管理
    . 未跟踪：不被Git管理的文件
* 已被Git管理
    . 未修改：工作区中文件和内容和Git仓库中文件的内容保持一致
    . 已修改：工作区中文件的内容和Git仓库中文件的内容不一致
    . 已暂存：工作区中被修改的文件已被放到暂存区，准备将修改后的文件保存到Git仓库中

Git操作的最终结果：让工作区中的文件都处于“未修改”的状态

### 检查文件的状态
可以使用git status命令查看文件处于什么状态，例如：
   /* 文件目录 */ git status
   
在状态报告中可以看到新建的index.html文件出现在Untracked files（未跟踪的文件）下面。
未跟踪的文件意味着Git在之前的快照（提交）中没有这些文件；
Git不会自动将之纳入跟踪范围，除非明确告诉它“我需要使用Git跟踪管理该文件”

### 以精简的方式显示文件状态
    git status -short
    git status -s

### 跟踪新文件
使用命令git add开始跟着一个文件，所以，要跟踪index.html文件，运行如下命令
    git add index.html
此时再运行Git status命令，会看到index.html文件再Changes to be committed这行的下面，说明已被跟踪，并处于暂存状态。

### 提交更新
现在暂存区中有一个文件等待被提交到Git仓库中进行保存。
可以执行 git commit 命令进行提交。其中 -m选项 后面是本次提交信息，用来对提交的内容做进一步的描述：
    git commit -m '新建了index.html文件'

再次查询文件状态，为“未修改的状态”，没有任何文件需要被提交

### 对已提交的文件进行修改
目前，index.html文件已经被Git跟踪，并且工作区和Git仓库中的index.html文件内容保持一致。
当我们修改了工作区中的index.html的内容之后，再次运行git status 和 git status -s命令，状态为：modified 

### 暂存已修改的文件
目前，工作区中的index.html文件已被修改，如果要暂存这次修改，需要再次运行git add命令
这个命令是多功能命令，主要有如下3个功能：
    01 可以用它开始跟踪新文件
    02 把以跟踪的、且已修改的文件放到暂存区
    03 把有冲突的文件标记为已解决的状态

### 提交已暂存的文件
再次运行git commit -m "提交消息"命令，既可以暂存区中记录的index.html的快照，提交到Git仓库中进行保存：
    git commit -m "初始化了index.html"

### 撤销对文件的修改
撤销对文件的修改是指：把对工作区中对应文件的修改，还原成Git仓库中所保存的版本。
操作的结果：所有的修改会丢失，且无法恢复！危险性比较高，请慎重操作！
    git checkout -- 文件名
用Git仓库中的文件来覆盖工作区里的文件

### 向暂存区一次添加多个文件
    git add .  
一次性添加多个文件，将所有的新增和修改的文件加入暂存区

### 取消暂存区的文件
    git reset HEAD 文件名

### 跳过使用暂存区
git标准的工作流程是 工作区 => 暂存区 => Git仓库，但有时候怎么做是略显繁琐，此时可以越过暂存区；
直接将工作区中的修改提交到Git仓库，这时候Git工作的流程简化为了 工作区 => git仓库
只要在提交的时候，给git commit 加上 -a，Git就会自动把所有已经跟踪过的文件暂存起来一并提交，从而越过git add的过程；
    git commit -a -m "描述"

### 移除文件
01 从Git仓库和工作区同时移除对应文件
    * git rm -f index.css
02 只从Git仓库中移除指定的文件，但保留工作区中对应的文件
    * git rm --cached index.css

### 忽略文件
一般我们总是会有些文件无法纳入Git的管理，也不希望它们总是出现在为跟踪文件列表。
在这种情况下，我们可以创建一个名为.gitignore的配置文件，列出要忽略的文件的匹配模式
文件.gitignore的格式规范：
    01 以#开头的是注释
    02 以/结尾的是目录
    03 以/开头防止递归
    04 ！开头表示取反
    05 可以使用glob模式进行文件和文件夹的匹配（glob指简化了的正则表达式）
        * 星号*匹配零个或多个任意字符
        * [abc]匹配任何一个列在方括号中的字符
        * 问号?只匹配任意一个字符
        * 在方括号中使用短斜线分割两个字符，表示所有在这两个字符范围内的都可以匹配（比如[0-9]表示匹配所有0到9的数字）
        * 两个星号**表示匹配任意中间目录（比如a/\**/z、a/b/或者a/b/c/z等）
```
# 忽略所有的.a文件
*.a

# 但是跟踪所有的lib.a文件，即使你在前面忽略了.a文件
!lib.a

# 只忽略当前目录下的TODO文件，而不再忽略subdir/TODO
/TODO

# 忽略任何目录下名为build的文件夹
build/

# 忽略doc/notes.text，但不忽略doc/server/arch.txt
doc/*.txt

# 忽略doc/目录下以及其所有子目录下的.pdf文件
doc/**/*.pdf
```

### 查看提交历史
按照时间的先后顺序列出所有的提交历史，最近提交的排在最上面
    git log

只展示最近的两次提交历史，数字可以按需进行填写
    git log -2

在一行上展示最近两条提交历史的信息
git log -2 --pretty=oneline

在一行上展示最近两条提交历史，并自定义输出格式
%h提交到简写哈希值   %an作者姓名   %ar作者的修改日期，按多久以前的方式显示   %s提交说明
git log -2 --pretty=format: %n | %an | %ar | %s

### 回退到指定版本
在一行上展示所有的提交历史
    git log -pretty=oneline

使用git reset --herd 命令，根据指定的提交ID回退到指定版本
    git reset --herd <CommitID>

在旧版本中使用git reflog --pretty=oneline 命令，查看命令操作的历史
    git reflog --pretty=oneline

再次根据最新的提交ID，跳转到最新的版本
    git reset --head <CommitID>

//-----------------------------------------------------
# Github
### 什么是开源
开源：
    * 开源即开放源代码
    * 代码是公开的
    * 任何人都可以去查看，修改和使用开源代码
闭源：
    * 软件代码是封闭的
    * 只有作者能看到闭源软件的代码
    * 只有作者能对源代码经行修改

### 开源许可协议
开源不意味着完全没有限制，为了限制使用者的使用范围和保护作者的权益，每个开源项目都应该遵守开源许可协议（Open Source License）
常见的5种开源许可协议：
    01 BSD（Berkeley Software Distribution）
    02 Apache Licence 2.0
    03 **GPL**（GNU General Public License）
        * 具有传染性的一种开源协议，不允许修改后和衍生的代码作为闭源的商业软件发布和销售
        * 具有GPL的最著名的软件项目是Linux
    04 LGPL（GNU Lesser GGeneral Publicc License）
    05 MIT（Massachusetts Institute of Technology， MIT）
        * 目前限制最少的协议
        * 唯一条件：在修改的代码或者发行包中，必须包含原作者的许可信息
        * 软件项目：jquery、node.js
    
### 为什么要开源
开源的核心思想是“人人为我，我为人人”，人们越来越喜欢开源项目的主要原因：
    01 更多的操控权
    02 开源让学习变得更容易
    03 开眼才有真正的安全

### 开源项目托管平台
专门用于免费存放开源项目源代码的网站，叫做开源项目托管平台。目前世界上比较出名的有：
    * Github（全球最牛的开源项目托管平台，没有之一）
    * Gitlab（对代码私密性支持较好，因此企业用户较多）
    * Gitee（又叫码云，是国内的开源项目托管平台，访问速度快，纯中文界面，使用友好）

注意：以上3个开源项目托管平台，只能托管Git管理的项目源代码，因此，它们的名字都已Git开头

### 远程仓库的两种访问方式
Github上的远程仓库，有两种访问方式，分别是HTTPS和SSH，它们分别是：
    01 https：零配置，但是每次访问仓库都需要重复输入Github的账号和密码才能访问成功
    02 SSH：需要进行额外的配置，但配置成功后，每次访问仓库，不需要重复输入Github的账号和密码
推荐使用SSH访问仓库

### 使用HTTPS将本地仓库上传到Github
    git remote add origin(名字，可修改) HTTPS  // 将本地仓库和远程仓库经行管理，并把远程仓库命名为origin    
    git push -u origin master                 // 将本地仓库中的内容推送到远程的origin仓库中
每次上传都需要登录Githun账号
注：如果没有本地Git仓库，需要创建Git仓库，在上传
https://github.com/niubilit/my_01.git
git@github.com:niubilit/my_01.git

只有第一次才使用上面的代码提交，之后的提交都是 git push

### SSH Key
作用：实现本地仓库和Github仓库之间免登录的加密数据传输
好处：免登录身份认证、数据加密传输
SSH Key 由两部分组成：
    01 id_rsa （私钥文件，存放于客户端的电脑中即可）
    02 id_rsa.pub（公钥文件，需要配置到Github中）

#### 生成SSH Key
    01 打开Git Bash
    02 运行如下命令，并将your_email@example.com替换为注册Github账号时填写的邮箱：
        * ssh-keygen -t rsa -b 4096 -C "your_email@example.com"
    03 连续敲击3次回车键，即可在C:\Users\用户名文件\.ssh目录中生成id_rsa和id_rsa.phb两个文件

#### 配置SSH Key
    01 使用记事本打开id_rsa.pub文件，复制里面的内容
    02 在浏览器中登录Github，点击头像 => Settings => SSH and GPG Keys => New SSH Key
    03 将id_rsa.pub文件中的内容，粘贴到Key对应的文本框中
    04 在Title文本框中填写一个名称，来标识这个Key从何而来

#### 检查Github的SSH key是否配置成功
    ssh -T git@github.com

### 基于SSH将仓库上传到Github
 git remote add origin git@github.com:niubilit/project_02.git
 git branch -M main
 git push -u origin main

### 将远程仓库克隆到本地
打开git bash
    git clone 远程仓库地址


# Git分支

### 分支的概念
分支就是科幻电影里面的平行宇宙，当你正在电脑前努力学习Git的时候，另一个你正在另一个平行宇宙里努力学习SVN。
如果两个平行宇宙互不干扰，那对现在的你也没有说明影响。
不过，在某个时间点，两个平行宇宙合并了，结果，你继学会了Git又学会了SVN

### 分支在实际开发中的作用
在进行多人协作开发的时候，为了防止互相干扰，提高协作开发的体验，建议每个开发者都基于分支进行项目功能的开发
    项目：
        * 登录功能  小兰
        * 注册功能  小紫
        * 支付功能  小南
    再将完成的功能合并到主分支上

### master主分支
在初始化本地Git仓库的时候，Git默认已将帮我们创建了一个名为master的分支。通常我们把这个master分支叫做主分支。
在实际工作中，master主分支上修改代码的，风险太高，容易导致整个项目崩溃。

### 功能分支
由于程序员不能直接在master分支上进行功能的开发，所以就有了功能分支的概念。
功能分支指的时专门用于开发新功能的分支，它是临时从master主分支上分叉出来的，当新功能开发且测试完毕后，最终需要合并到master主分支上。
<img src="./master.png"/>

### 查看分支列表
使用如下命令，可以查看git仓库中所有的分支列表
    git branch
分支名字前面的*号表示当前所处的分支

### 创建新分支
使用如下的命令，可以基于当前分支，创建一个新分支，此时，新分支中的代码和当前分支完全相同
    git branch 分支名称
<img src="./branch01.png" />
注：执行完创建分支的命令之后，用户当前所处的还是master分支

### 切换分支
使用如下命令，可以切换到指定分支上进行开发
    git checkout login

### 快速创建和切换分支
使用如下的命令，可以创建指定名称的新分支，并立即切换到新分支上
    git checkout -b 分支名称

### 合并分支 
功能分支的代码开发测试完毕之后，可以使用如下的命令，将完成后的代码合并到master主分支上：
    git checkout master // 切换到maset分支
    git merge login     // 在master分支上运行git merge命令，将login分支的代码合并到master分支
<img src="./master.png" />
注：假设要把C分支合并到A分支，则必须先切换到A分支上，在运行git merge命令，来合并C分支
    每个分支的文件都是独立的

### 删除分支
当把功能分支的代码合并到master主分支上以后，就可以使用如下命令，删除对应的功能分支：
    git branch -d 分支名称
注：不能删除当前处于的某个分支

### 遇到冲突时合并分支
如果在两个不同的分支在，对同一个文件进行了不同的修改，Git就没法干净的合并他们。此时，我们需要打开这些冲突文件然后手动解决。
    假设：把reg分支合并到master分支上，代码发生了冲突
    git checkout master
    git merge reg

    打开冲突文件，手动解决冲突之后，在执行如下命令
    git add .
    git commit -m "解决了分支冲突的问题"
<img src="./chongtu.png" />

### 将本地文件推送到远程仓库
如果是第一次将本地文件推送到远程仓库，需要运行如下命令：
    # -u 表示把本地分支和远程分支关联起来，只在的第一次推送的时候需要带-u参数
    git push -u 远程仓库的别名 本地分支名称：远程分支mingc

    # 实际案例
    git push -u origin login:project    

    # 如果希望远程分支的别名和本地分支名称相同， 可以对命令进行简化
    git push -u origin login
注：第一次推送分支需要带-u参数，此后可以直接使用git push推送代码分支

### 如何查看远程仓库所有分支列表
通过如下命令，可以查看远程仓库中，所有分支列表信息
    git remote show 远程仓库名称

### 跟踪分支
跟踪分支指的是：从远程仓库中，把远程分支下载到本地仓库中。需要运行的命令如下：
    git checkout 远程分支名字

    # 实际案例
    git checkout pay

    # 从远程仓库中，把对应的远程分支下载到本地，并把下载的本地分支进行重命名
    git checkout -b 本地分支名称 远程分支名称/远程分支名称

    # 实际案例
    git checkout -b oayment origin/pay

### 拉取远程分支的最新的代码
可以使用如下命令，把远程分支最新的代码下载到本地对应的分支中：
    # 从远程仓库，拉取当前分支最新的代码，保持当前分支的代码和远程分支代码一致
    git pull

### 删除远程分支
可以使用如下的命令，删除远程仓库中指定的分支：
    # 删除远程仓库中，指定名称的远程分支
    git push 远程仓库名称 --delete 远程分支名称

    # 实际案例
    git push origin --delete pay

    # 强制删除本地分支
    git branch -D 分支名称